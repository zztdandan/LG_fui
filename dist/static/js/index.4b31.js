(window.webpackJsonp=window.webpackJsonp||[]).push([["index"],{13:function(e,t,n){n("201c"),e.exports=n("ROtW")},"3+IS":function(e,t,n){"use strict";var r=n("14Xm"),_=n.n(r),a=n("D3Ub"),o=n.n(a);n("xN9W");t.a=function(){var e=o()(_.a.mark(function e(t,n,r){var a,o,i,u,s,c,f,l,p;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("home_menu"!==t.name){e.next=15;break}if(console.log("do_router_check",t),a=t.params.page_id,o=r.getters.USER_MENU,i=o.where(function(e){return e.code===a}),u=r.getters.ACTIVED_PAGE,!(i.length>0)){e.next=12;break}return(s=i.first())!==u&&n.$store.dispatch("open_page",s),e.abrupt("return",0);case 12:throw new Error("无权访问页面");case 13:e.next=18;break;case 15:c=r.getters.USER_MENU,(f=c.where(function(e){return e.code===t.name})).length>0&&(l=f.first(),p=r.getters.ACTIVED_PAGE,l.code!==p.id&&n.$store.dispatch("open_page",l));case 18:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},Dvns:function(e,t,n){},H5yV:function(e,t,n){"use strict";var r=n("4d7F"),_=n.n(r),a=n("vDqi"),o=n.n(a),i=n("X4fA"),u=n("MfTl"),s=n.n(u),c=o.a.create({timeout:5e3});c.interceptors.request.use(function(e){return Object(i.a)()&&(e.headers[s.a.Auth.UserTokenName]=Object(i.a)()),e},function(e){console.log(e),_.a.reject(e)}),t.a=c},LNiT:function(e,t,n){"use strict";function r(e,t){t.$alert(e,"信息",{confirmButtonText:"确定",callback:function(e){}})}n.d(t,"a",function(){return r})},MfTl:function(e,t){e.exports={Auth:{LoginPostUrl:"/api/sys/login",UserTokenName:"accesstoken",MainPageUrl:"/#/",LoginUrl:"/login.html#/"},Axios:{Base_API:"http://172.16.4.194:8080/app/mock/17"},Tab:{DefaultTab:{order:0,id:"main_index",url:"/#/main",title:"main"}},UserManage:{PostList:"/api/post_user_list",UserDel:"/api/user/del",UserUpdate:"/api/user/update",UserAdd:"/api/user/add"},PageManage:{GetTree:"/api/get_menu",MenuDel:"/api/user/del"}}},Nb8D:function(e,t,n){"use strict";var r=n("14Xm"),_=n.n(r),a=n("D3Ub"),o=n.n(a),i=n("X4fA"),u=function(){var e=o()(_.a.mark(function e(t,n){var r,a,o,u,s,c,f,l,p,E;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(i.a)(),e.next=3,n.get("/api/get_menu");case 3:return r=e.sent,a=r.data,e.next=7,n.get("/api/get_user_auth");case 7:return o=e.sent,u=o.data,e.next=11,n.get("/api/get_user_role");case 11:return s=e.sent,c=s.data,e.next=15,n.get("/api/sys/user/info");case 15:if(f=e.sent,l=f.data,0===a.code&&0===u.code&&0===c.code&&0===l.code){e.next=21;break}throw new Error("获取权限信息失败");case 21:return p={user_name:l.data.username,user_avatar:l.data.imgpath},e.next=24,t.$store.dispatch("User_Login",p);case 24:return E=e.sent,console.log(E),e.next=28,t.$store.dispatch("SetAuth",u.data);case 28:return e.sent,e.next=31,t.$store.dispatch("SetMenu",a.data);case 31:return e.sent,e.next=34,t.$store.dispatch("SetRole",c.data);case 34:e.sent;case 35:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();t.a=u},O9fi:function(e,t,n){},OOIL:function(e,t,n){"use strict";var r=n("oQr/");n.d(t,"c",function(){return r.a});var _=n("MMau");n.d(t,"d",function(){return _.a});var a=n("dr6Q");n.d(t,"e",function(){return a.a});var o=n("F35N");n.d(t,"a",function(){return o.a});var i=n("Fc2F");n.d(t,"b",function(){return i.a});var u=n("yJxe");n.d(t,"f",function(){return u.a})},Oeb0:function(e,t,n){},ROtW:function(e,t,n){"use strict";n.r(t);var r=n("oCYn"),_=(n("9d8Q"),n("XJYT")),a=n.n(_),o=(n("D66Q"),n("stYL")),i=n.n(o),u=(n("Dvns"),n("91rt")),s=n("L2JU"),c=n("4d7F"),f=n.n(c),l=n("X4fA"),p=(n("33yf"),{state:{user_info:{user_name:"test",user_avatar:""},login_stats:{},token:Object(l.a)()},mutations:{SET_USER_INFO:function(e,t){e.user_info=t},CLEAR_USER_INFO:function(e){e.user_info={}},SET_LOGIN_STATS:function(e,t){e.login_stats=t},CLEAR_LOGIN_STATS:function(e){e.login_stats={}},SET_TOKEN:function(e,t){e.token=t}},actions:{User_Login:function(e,t){var n=e.commit;return new f.a(function(e,r){try{n("SET_USER_INFO",t),n("SET_LOGIN_STATS",{stats:"login"}),e("11")}catch(e){r(e)}})},User_Logout:function(e){var t=e.commit;t("CLEAR_USER_INFO"),t("CLEAR_LOGIN_STATS"),t("LOGOUT_AUTH")},User_ChangeStats:function(e,t){(0,e.commit)("SET_LOGIN_STATS",t)},User_ShowInfo:function(e){e.commit;var t=e.state;return new f.a(function(e,n){try{e({user_info:t.user_info,login_stats:t.login_stats})}catch(e){n(e)}})}}}),E={state:{user_menu_list:[],user_auth_list:[],user_role:{role:"",role_list:[]}},mutations:{SET_AUTH_LIST:function(e,t){e.user_auth_list=t},SET_MENU_LIST:function(e,t){e.user_menu_list=t},SET_ROLE_LIST:function(e,t){e.user_role=t},LOGOUT_AUTH:function(e){e.user_menu_list=[],e.user_auth_list=[],e.user_role={role:"",role_list:[]}}},actions:{SetAuth:function(e,t){var n=e.commit;return new f.a(function(e,r){try{n("SET_AUTH_LIST",t),e(0)}catch(e){r(e)}})},SetMenu:function(e,t){var n=e.commit;return new f.a(function(e,r){try{n("SET_MENU_LIST",t),e(0)}catch(e){r(e)}})},SetRole:function(e,t){var n=e.commit;return new f.a(function(e,r){try{n("SET_ROLE_LIST",t),e(0)}catch(e){r(e)}})}}},d=(n("p46w"),{state:{sidebar:{opened:!0},device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened},CLOSE_SIDEBAR:function(e,t){e.sidebar.opened=!1},TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(e){(0,e.commit)("CLOSE_SIDEBAR")},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)}}}),m=(n("xN9W"),n("Po9p"),{state:{tab_list:[],active_tab:{}},mutations:{ADD_TAB:function(e,t){try{var n=0;0!=e.tab_list.length&&(n=e.tab_list.where(function(e){return e.id==t.id}).length),n>0||(t.order=e.tab_list.length,e.tab_list.push(t))}catch(e){throw new Error("tab的格式错误")}},TOGGLE_ACTIVE_TAB:function(e,t){var n=e.tab_list.where(function(e){return e.id===t});if(!(n.length>0))throw new Error("非法切换请求");e.active_tab=n.first()},DEL_TAB:function(e,t){var n=e.tab_list.where(function(e){return e.id===t});if(!(n.length>0))throw new Error("非法删除请求");var r=n.first();e.tab_list.where(function(e){return e.order>r.order}).forEach(function(e){e.order=e.order-1}),e.tab_list.remove(r)},TOGGLE_FROM_DEL_TAB:function(e,t){var n=e.tab_list.orderBy(function(e){return Math.abs(e.order-t)});e.active_tab=n.first()}},actions:{open_page:function(e,t){var n=e.commit,r=e.rootGetters;return new f.a(function(e,_){try{var a=r.USER_MENU.where(function(e){return e.code==t.code}).first(),o={order:0,id:a.code,url:a.url,title:a.name};if(null==o.url)throw new Error("该code代表的不是实际页面");n("ADD_TAB",o),n("TOGGLE_ACTIVE_TAB",o.id),e(0)}catch(e){_(e)}})},close_page:function(e,t){var n=e.commit,r=e.state;return new f.a(function(e,_){var a=r.tab_list.where(function(e){return e.id===t}).first();n("DEL_TAB",t),0==r.tab_list.length?r.active_tab={}:r.active_tab.id===t&&n("TOGGLE_FROM_DEL_TAB",a.order),e(r)})},toggle_page:function(e,t){(0,e.commit)("TOGGLE_ACTIVE_TAB",t)}}}),b={USER_TOKEN:function(e){return e.login_info.token},USER_MENU:function(e){return e.authorize.user_menu_list},ACTIVED_PAGE:function(e){return e.tabs.active_tab},TABS:function(e){return e.tabs.tab_list},SIDEBAR_COLLAPSE:function(e){return e.stats.sidebar.opened},USER_INFO:function(e){return e.login_info.user_info}};r.default.use(s.a);var g=new s.a.Store({modules:{stats:d,login_info:p,authorize:E,tabs:m},getters:b}),h=(n("O9fi"),n("jYMb"),n("jE9Z")),T=(n("vIgT"),n("1JjB")),O=n("KGGZ"),A=n("Lprp"),v=n("zk/B"),D=n("mkKp"),M=n("uGe2"),L=n("jiXE");r.default.use(h.a);var U=new h.a({routes:[{path:"/home_menu/:page_id",name:"home_menu",component:T.a,meta:{keepAlive:!0}},{path:"/",name:"blank_page",component:L.a},{path:"/user_info",name:"user_info",component:O.a},{path:"/user_manage",name:"user_manage",component:A.a},{path:"/auth_manage",name:"auth_manage",component:v.a},{path:"/role_manage",name:"role_manage",component:D.a},{path:"/page_manage",name:"page_manage",component:M.a},{path:"/welcome_page",name:"welcome_page",component:L.a}]}),w=n("H5yV");r.default.prototype.$ajax=w.a,r.default.use(a.a,{locale:i.a}),r.default.config.productionTip=!1;new r.default({el:"#app",store:g,router:U,render:function(e){return e(u.a)}})},X4fA:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u});var r=n("p46w"),_=n.n(r),a=n("MfTl"),o=n.n(a).a.Auth.UserTokenName;function i(){return _.a.get(o)}function u(e){return _.a.set(o,e)}},YRwF:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14Xm"),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("EJiy"),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("D3Ub"),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__),_PostMessageFunction_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ifgi");__webpack_exports__.a=function(){var _ref=babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(rsdata,that_vue){var req,PM,req_name,req_param,do_funtion_str,res,salt,ret,_salt;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(req=rsdata,_context.prev=1,PM=_PostMessageFunction_index_js__WEBPACK_IMPORTED_MODULE_4__.a,"simple"!==req.type){_context.next=12;break}return console.log("获得命令",rsdata),req_name=req.req_name,req_param=babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default()(req.req_param),do_funtion_str="PM."+req_name+"("+req_param+",that_vue)",res=eval(do_funtion_str),salt=void 0!=babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(req.salt)?req.salt:"",ret={code:0,salt:salt,data:res},_context.abrupt("return",ret);case 12:_context.next=18;break;case 14:_context.prev=14,_context.t0=_context.catch(1),_salt=void 0!=babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(req.salt)?req.salt:"",ret={code:-1,salt:_salt};case 18:case"end":return _context.stop()}},_callee,this,[[1,14]])}));return function(e,t){return _ref.apply(this,arguments)}}()},Yfch:function(e,t,n){"use strict"},ghNj:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("xN9W");function r(e,t,n,r){var _=new Array;return e.where(function(e){return null==e[r]||""===e[r]}).forEach(function(a){var o=function e(t,n,r,_,a,o){var i=new Object(t);i.id=t[r];i.label=t[_];i.parent_name=o||"无";var u=n.where(function(e){return e[a]===i.id});return u.length>0?(i.children=new Array,u.forEach(function(t){var o=e(t,n,r,_,a,i.label);i.children.push(o)}),i):i}(a,e,t,n,r,null);_.push(o)}),_}},ifgi:function(e,t,n){"use strict";var r=n("nnFL"),_=n.n(r);t.a={setIframeHeight:function(e,t){var n=e.iframe_name,r=e.iframe_height,_=r;return"number"==typeof r&&(_=r+"px"),document.querySelector("#iframe_"+n).setAttribute("height",_),0},closeIframe:function(e,t){var n=e.name;console.log("关闭tab",n),t.$store.dispatch("close_page",n)},getUserInfo:function(e,t){var n=e.token;return console.log("收到请求信息函数",n),n===t.$store.getters.USER_TOKEN?{msg:"suc",user_info:t.$store.getters.USER_INFO}:{msg:"token无法对应"}},openNewPage:function(e,t){var n=e.code;console.log("收到打开新页面请求");var r={code:n};t.$store.dispatch("open_page",r)},getMenu:function(e,t){return _()(e),console.log("收到获得目录信息请求"),t.$store.getters.USER_MENU}}},jYMb:function(e,t,n){}},[[13,"runtime","ele","vue","vendor"]]]);