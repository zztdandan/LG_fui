(window.webpackJsonp=window.webpackJsonp||[]).push([["index"],{16:function(e,t,n){n("201c"),e.exports=n("ROtW")},"3+IS":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return i});var r=n("14Xm"),_=n.n(r),o=n("D3Ub"),a=n.n(o),u=(n("xN9W"),n("G+Z7")),i=function(){var e=a()(_.a.mark(function e(t,n,r){var o,a,i,c,s,f,l,p,E;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("home_menu"!==t.name){e.next=16;break}if(console.log("do_router_check",t),o=t.params.page_id,a=r.getters.USER_MENU,i=a.where(function(e){return e.code===o}),c=r.getters.ACTIVED_PAGE,!(i.length>0)){e.next=12;break}return(s=i.first())!==c&&n.$store.dispatch("open_page",s),e.abrupt("return",0);case 12:throw Object(u.b)("无权访问页面"),new Error("无权访问页面");case 14:e.next=19;break;case 16:f=r.getters.USER_MENU,(l=f.where(function(e){return e.code===t.name})).length>0&&(p=l.first(),E=r.getters.ACTIVED_PAGE,p.code!==E.id&&n.$store.dispatch("open_page",p));case 19:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}();function c(e){e.$router.beforeEach(function(t,n,r){i(t,e,e.$store).then(function(e){r()}).catch(function(e){Object(u.a)("检查router出错",e)})})}},Dvns:function(e,t,n){},"G+Z7":function(e,t,n){"use strict";function r(e){console.log("========================================"),console.log("| lg_admin错误信息:"),console.log("| ",e),console.log("----------------------------------------")}function _(e,t){console.log("========================================"),console.log("| lg_admin统一错误处理:"),console.log("| ",e),console.log("| ",t),console.log("----------------------------------------")}function o(e,t){console.log("========================================"),console.log("| lg_admin_log:"),console.log("| ",e),console.log("| ",t),console.log("----------------------------------------")}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return _}),n.d(t,"c",function(){return o})},H5yV:function(e,t,n){"use strict";var r=n("4d7F"),_=n.n(r),o=n("vDqi"),a=n.n(o),u=n("X4fA"),i=n("MfTl"),c=n.n(i),s=n("G+Z7"),f=a.a.create({timeout:5e3});f.interceptors.request.use(function(e){return Object(u.a)()&&(e.headers[c.a.Auth.UserTokenName]=Object(u.a)()),e},function(e){console.log(e),_.a.reject(e)}),f.interceptors.response.use(function(e){try{if(0==e.data.code)return e.data.data;Object(s.a)("lg_admin_axios:服务端返回错误结果",e.data)}catch(e){Object(s.a)("lg_admin_axios:解析response时发生错误,error:",e)}},function(e){Object(s.a)("lg_admin_axios:axios请求错误:",e)}),t.a=f},MfTl:function(e,t){e.exports={Auth:{LoginPostUrl:"/api/sys/login",UserTokenName:"accesstoken",MainPageUrl:"/#/",LoginUrl:"/login.html#/"}}},Nb8D:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var r=n("14Xm"),_=n.n(r),o=n("D3Ub"),a=n.n(o),u=(n("X4fA"),n("3+IS")),i=n("G+Z7"),c=function(){var e=a()(_.a.mark(function e(t,n){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(t,n),f(t,n),l(t,n),p(t,n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=a()(_.a.mark(function e(t,n){var r,o,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/api/sys/user/info");case 2:if(void 0!==(r=e.sent)){e.next=5;break}throw new Error("登陆错误");case 5:return o={user_name:r.username,user_avatar:r.imgpath},e.next=8,t.$store.dispatch("User_Login",o);case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=a()(_.a.mark(function e(t,n){var r,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/api/get_user_auth");case 2:return r=e.sent,Object(i.c)("权限信息打印",r),e.next=6,t.$store.dispatch("SetAuth",r);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=a()(_.a.mark(function e(t,n){var r,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/api/get_menu");case 2:return r=e.sent,Object(i.c)("目录打印",r),e.next=6,t.$store.dispatch("SetMenu",r);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=a()(_.a.mark(function e(t,n){var r,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/api/get_user_role");case 2:return r=e.sent,e.next=5,t.$store.dispatch("SetRole",r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}();function E(e){c(e,e.$lg_ajax).then(function(t){Object(i.c)("token检查",t),Object(u.a)(e.$route,e,e.$store).then(function(e){Object(i.c)("token检查通过：",e)}).catch(function(e){Object(i.a)("check_route_function出错,error:",e)})}).catch(function(e){Object(i.a)("do_check_token出错,error:",e)})}},OOIL:function(e,t,n){"use strict";var r=n("oQr/");n.d(t,"c",function(){return r.a});var _=n("MMau");n.d(t,"d",function(){return _.a});var o=n("dr6Q");n.d(t,"e",function(){return o.a});var a=n("F35N");n.d(t,"a",function(){return a.a});var u=n("Fc2F");n.d(t,"b",function(){return u.a});var i=n("yJxe");n.d(t,"f",function(){return i.a})},ROtW:function(e,t,n){"use strict";n.r(t);var r=n("oCYn"),_=(n("9d8Q"),n("stYL")),o=n.n(_),a=(n("Dvns"),n("91rt")),u=n("L2JU"),i=n("4d7F"),c=n.n(i),s=n("X4fA"),f=(n("33yf"),{state:{user_info:{user_name:"test",user_avatar:""},login_stats:{},token:Object(s.a)()},mutations:{SET_USER_INFO:function(e,t){e.user_info=t},CLEAR_USER_INFO:function(e){e.user_info={}},SET_LOGIN_STATS:function(e,t){e.login_stats=t},CLEAR_LOGIN_STATS:function(e){e.login_stats={}},SET_TOKEN:function(e,t){e.token=t}},actions:{User_Login:function(e,t){var n=e.commit;return new c.a(function(e,r){try{n("SET_USER_INFO",t),n("SET_LOGIN_STATS",{stats:"login"}),e("11")}catch(e){r(e)}})},User_Logout:function(e){var t=e.commit;t("CLEAR_USER_INFO"),t("CLEAR_LOGIN_STATS"),t("LOGOUT_AUTH")},User_ChangeStats:function(e,t){(0,e.commit)("SET_LOGIN_STATS",t)},User_ShowInfo:function(e){e.commit;var t=e.state;return new c.a(function(e,n){try{e({user_info:t.user_info,login_stats:t.login_stats})}catch(e){n(e)}})}}}),l={state:{user_menu_list:[],user_auth_list:[],user_role:{role:"",role_list:[]}},mutations:{SET_AUTH_LIST:function(e,t){e.user_auth_list=t},SET_MENU_LIST:function(e,t){e.user_menu_list=t},SET_ROLE_LIST:function(e,t){e.user_role=t},LOGOUT_AUTH:function(e){e.user_menu_list=[],e.user_auth_list=[],e.user_role={role:"",role_list:[]}}},actions:{SetAuth:function(e,t){var n=e.commit;return new c.a(function(e,r){try{n("SET_AUTH_LIST",t),e(0)}catch(e){r(e)}})},SetMenu:function(e,t){var n=e.commit;return new c.a(function(e,r){try{n("SET_MENU_LIST",t),e(0)}catch(e){r(e)}})},SetRole:function(e,t){var n=e.commit;return new c.a(function(e,r){try{n("SET_ROLE_LIST",t),e(0)}catch(e){r(e)}})}}},p=(n("p46w"),{state:{sidebar:{opened:!1},device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened},CLOSE_SIDEBAR:function(e,t){e.sidebar.opened=!1},TOGGLE_DEVICE:function(e,t){e.device=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(e){(0,e.commit)("CLOSE_SIDEBAR")},ToggleDevice:function(e,t){(0,e.commit)("TOGGLE_DEVICE",t)}}}),E=(n("xN9W"),n("Po9p"),{state:{tab_list:[],active_tab:{}},mutations:{ADD_TAB:function(e,t){try{var n=0;0!=e.tab_list.length&&(n=e.tab_list.where(function(e){return e.id==t.id}).length),n>0||(t.order=e.tab_list.length,e.tab_list.push(t))}catch(e){throw new Error("tab的格式错误")}},TOGGLE_ACTIVE_TAB:function(e,t){var n=e.tab_list.where(function(e){return e.id===t});if(!(n.length>0))throw new Error("非法切换请求");e.active_tab=n.first()},DEL_TAB:function(e,t){var n=e.tab_list.where(function(e){return e.id===t});if(!(n.length>0))throw new Error("非法删除请求");var r=n.first();e.tab_list.where(function(e){return e.order>r.order}).forEach(function(e){e.order=e.order-1}),e.tab_list.remove(r)},TOGGLE_FROM_DEL_TAB:function(e,t){var n=e.tab_list.orderBy(function(e){return Math.abs(e.order-t)});e.active_tab=n.first()}},actions:{open_page:function(e,t){var n=e.commit,r=e.rootGetters;return new c.a(function(e,_){try{var o=r.USER_MENU.where(function(e){return e.code==t.code}).first(),a={order:0,id:o.code,url:o.url,title:o.name};if(null==a.url)throw new Error("该code代表的不是实际页面");n("ADD_TAB",a),n("TOGGLE_ACTIVE_TAB",a.id),e(0)}catch(e){_(e)}})},close_page:function(e,t){var n=e.commit,r=e.state;return new c.a(function(e,_){var o=r.tab_list.where(function(e){return e.id===t}).first();n("DEL_TAB",t),0==r.tab_list.length?r.active_tab={}:r.active_tab.id===t&&n("TOGGLE_FROM_DEL_TAB",o.order),e(r)})},toggle_page:function(e,t){(0,e.commit)("TOGGLE_ACTIVE_TAB",t)}}}),d={USER_TOKEN:function(e){return e.login_info.token},USER_MENU:function(e){return e.authorize.user_menu_list},ACTIVED_PAGE:function(e){return e.tabs.active_tab},TABS:function(e){return e.tabs.tab_list},SIDEBAR_COLLAPSE:function(e){return e.stats.sidebar.opened},USER_INFO:function(e){return e.login_info.user_info}};r.default.use(u.a);var m=new u.a.Store({modules:{stats:p,login_info:f,authorize:l,tabs:E},getters:d}),b=n("jE9Z"),g=n("Alk7"),h=n("KGGZ"),T=n("jiXE");r.default.use(b.a);var O=new b.a({routes:[{path:"/home_menu/:page_id",name:"home_menu",component:g.a,meta:{keepAlive:!0}},{path:"/",name:"blank_page",component:T.a},{path:"/user_info",name:"user_info",component:h.a},{path:"/welcome_page",name:"welcome_page",component:T.a}]}),v=n("H5yV"),A=n("vDqi"),w=n.n(A),D=n("XJYT"),L=n.n(D),S=(n("D66Q"),n("aPD/")),M=n.n(S);n("Y0vw");r.default.prototype.$lg_ajax=v.a,r.default.prototype.$ajax=w.a,r.default.use(L.a,{locale:o.a}),r.default.use(M.a),r.default.config.productionTip=!1;new r.default({el:"#app",store:m,router:O,render:function(e){return e(a.a)}})},X4fA:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return i});var r=n("p46w"),_=n.n(r),o=n("MfTl"),a=n.n(o).a.Auth.UserTokenName;function u(){return _.a.get(a)}function i(e){return _.a.set(a,e)}},YRwF:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14Xm"),babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("EJiy"),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("gDS+"),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2__),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("D3Ub"),babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__),_PostMessageFunction_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ifgi");__webpack_exports__.a=function(){var _ref=babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default()(babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(rsdata,that_vue){var req,PM,req_name,req_param,do_funtion_str,res,salt,ret,_salt;return babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(req=rsdata,_context.prev=1,PM=_PostMessageFunction_index_js__WEBPACK_IMPORTED_MODULE_4__.a,"simple"!==req.type){_context.next=12;break}return console.log("获得命令",rsdata),req_name=req.req_name,req_param=babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_2___default()(req.req_param),do_funtion_str="PM."+req_name+"("+req_param+",that_vue)",res=eval(do_funtion_str),salt=void 0!==babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(req.salt)?req.salt:"",ret={code:0,salt:salt,data:res},_context.abrupt("return",ret);case 12:_context.next=18;break;case 14:_context.prev=14,_context.t0=_context.catch(1),_salt=void 0!=babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1___default()(req.salt)?req.salt:"",ret={code:-1,salt:_salt};case 18:case"end":return _context.stop()}},_callee,this,[[1,14]])}));return function(e,t){return _ref.apply(this,arguments)}}()},Yfch:function(e,t,n){"use strict"},ifgi:function(e,t,n){"use strict";var r=n("nnFL"),_=n.n(r);t.a={setIframeHeight:function(e,t){var n=e.iframe_name,r=e.iframe_height,_=r;return"number"==typeof r&&(_=r+"px"),document.querySelector("#iframe_"+n).setAttribute("height",_),0},closeIframe:function(e,t){var n=e.name;console.log("关闭tab",n),t.$store.dispatch("close_page",n)},getUserInfo:function(e,t){var n=e.token;return console.log("收到请求信息函数",n),n===t.$store.getters.USER_TOKEN?{msg:"suc",user_info:t.$store.getters.USER_INFO}:{msg:"token无法对应"}},openNewPage:function(e,t){var n=e.code;console.log("收到打开新页面请求");var r={code:n};t.$store.dispatch("open_page",r)},getMenu:function(e,t){return _()(e),console.log("收到获得目录信息请求"),t.$store.getters.USER_MENU}}},uPdT:function(e,t,n){}},[[16,"runtime","ele","vue","vendor"]]]);